% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/loo_r2.R
\name{loo_r2}
\alias{loo_r2}
\alias{loo_r2.default}
\title{R2}
\usage{
loo_r2(y, yrep, log_lik, r_eff, ...)

\method{loo_r2}{default}(y, yrep, log_lik, r_eff = NULL)
}
\arguments{
\item{y}{A numeric vector of observations. Length should be equal to the
number of rows in \code{yrep}.}

\item{yrep}{A numeric matrix of predictions.}

\item{log_lik}{A matrix of pointwise log-likelihoods. Should be of same
dimension as \code{yrep}.}

\item{r_eff}{A Vector of relative effective sample size estimates containing
one element per observation. See \code{\link[=psis]{psis()}} for more details.}
}
\value{
A list with the following components:
\describe{
\item{\code{pointwise}}{
Pointwise components of the R2
}
\item{\code{estimate}}{
R2 estimate
}
\item{\code{se}}{
Standard error of the R2
}
}
}
\description{
The \code{loo_r2()} method can compute the pointwise R2 metric
}
\examples{
\donttest{
if (requireNamespace("rstanarm", quietly = TRUE)) {
  # Use rstanarm package to quickly fit a model and get both a log-likelihood
  # matrix and draws from the posterior predictive distribution
  library("rstanarm")
  data("mtcars")

  fit <- stan_glm(mpg ~ cyl + hp + wt, data = mtcars, refresh = 0)
  ll <- log_lik(fit)
  r_eff <- relative_eff(exp(-ll), chain_id = rep(1:4, each = 1000))

  yrep <- posterior_predict(fit)
  # Leave-one-out R2
  r2 <- loo_r2(
    y = mtcars$mpg,
    yrep = yrep,
    log_lik = ll,
    r_eff = r_eff
  )
}
}
}
